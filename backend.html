<!DOCTYPE html>
<html>
   <head>
      <title>Registration Page</title>
      <!-- <link rel="stylesheet" type="text/css" href="./css/bootstrap.css" /> -->
      <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3"
         crossorigin="anonymous">
      <script type="text/javascript" src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
      <script src="https://cdn.jsdelivr.net/jquery.validation/1.16.0/jquery.validate.min.js"></script>
      <script src="https://cdn.jsdelivr.net/jquery.validation/1.16.0/additional-methods.min.js"></script>
      <script type="text/javascript" src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js"></script>
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.css" integrity="sha512-aOG0c6nPNzGk+5zjwyJaoRUgCdOrfSDhmMID2u4+OIslr0GjpLKo7Xm0Ao3xmpM4T8AmIouRkqwj1nrdVsLKEQ==" crossorigin="anonymous" referrerpolicy="no-referrer" />
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <style>
         .error {
         color: red;
         }
      </style>
   </head>
   <body>
      <div class="container">
         <div class="col form-group-md-6 form-group-md-offset-3 ">
            <div class="panel panel-primary">
               <div class="panel-heading text-center">
                  <h1>Data Form</h1>
               </div>
               <div class="panel-body">
                  <div id="error_text" style="color:red"></div>
                  <form action="./connect.php" id="form" class="has-validation" method="post">
                     <div class="row">
                        <div class="col form-group">
                           <label for="vidhanSabha">Vidhan Sabha</label>
                           <input type="text" class="form-control" id="vidhanSabha" name="vidhanSabha" placeholder="" minlength="3"  required/>
                        </div>
                        <div class="col form-group">
                           <label for="wardNumber">Ward Number</label>
                           <input type="number" class="form-control" id="wardNumber" name="wardNumber" placeholder="" minlength="1" maxlength="3" />
                        </div>
                        <div class="col form-group">
                           <label for="nagarPalika">Nagar Palika/ Nagar Nigam</label>
                           <input type="text" class="form-control" id="nagarPalika" name="nagarPalika" placeholder="" minlength="5" maxlength="14" />
                        </div>
                     </div>
                     <div class="row">
                        <div class="col form-group">
                           <label for="boothNumber">Polling Booth Number</label>
                           <input type="number" class="form-control" id="boothNumber" name="boothNumber" placeholder="" minlength="1" maxlength="5"  />
                        </div>
                        <div class="col form-group">
                           <label for="boothName">Polling Booth Name</label>
                           <input type="text" class="form-control" id="boothName" name="boothName" placeholder="" minlength="5" maxlength="14" />
                        </div>
                        <div class="col form-group">
                           <label for="religion">Religion</label>
                           </br>
                           <select name="religion" id="religion" class="form-select" >
                              <option value="">Select Religion</option>
                              <option value="Hindu">Hindu</option>
                              <option value="Islam">Islam</option>
                              <option value="Sikh">Sikh</option>
                              <option value="Christian">Christian</option>
                           </select>
                        </div>
                     </div>
                     <div class="row">
                        <div class="col form-group">
                           <label for="name">Name</label>
                           <input type="text" class="form-control" id="name" placeholder="" minlength="2" name="name" />
                        </div>
                        <div class="col form-group">
                           <label for="surname">Surname</label>
                           <input type="text" class="form-control" id="surname" placeholder="" minlength="2" name="surname" />
                        </div>
                        <div class="col form-group">
                           <label for="caste">Caste</label>
                           <select name="caste" id="caste" class="form-select" >
                              <option value="">Select Caste</option>
                              <option value="General">General</option>
                              <option value="OBC">OBC</option>
                              <option value="ST/SC">ST/SC</option>
                           </select>
                        </div>
                        <div class="col form-group">
                           <label for="subcaste">Sub Caste</label>
                           <input type="text" class="form-control" id="subcaste" placeholder="" name="subcaste" minlength="3" />
                        </div>
                     </div>
                     <div class="row">
                        <div class="col form-group">
                           <label for="fhName">Father/Husband Name</label>
                           <input type="text" class="form-control" id="fhName" placeholder="" minlength="2" name="fhName" />
                        </div>
                        <div class="col form-group">
                           <label for="gender">Gender</label>
                           </br>
                           <select name="gender" id="gender" class="form-select" >
                              <option value="">Select Gender</option>
                              <option value="Male">Male</option>
                              <option value="Female">Female</option>
                              <option value="Other">Other</option>
                           </select>
                        </div>
                        <div class="col form-group">
                           <label for="age">Age</label>
                           </br>
                           <select name="age" id="age" class="form-select" >
                              <option value="">Select Age</option>
                              <option value="18-21">18-21</option>
                              <option value="22-30">22-30</option>
                              <option value="31-50">31-50</option>
                              <option value="51-65">51-65</option>
                              <option value="Above 65">Above 65</option>
                           </select>
                        </div>
                        <div class="col form-group">
                           <label for="aadhar">Aadhar Number</label>
                           <input type="number" class="form-control" id="aadhar" placeholder="" name="aadhar" minlength="12" maxlength="12"  />
                        </div>
                        <div class="col form-group">
                           <label for="voterNumber">Voter Number</label>
                           <input type="text" class="form-control" id="voterNumber" placeholder="" name="voterNumber" minlength="5" maxlength="14" />
                        </div>
                     </div>
                     <div class="row">
                        <label for="Address">Address</label>
                        <div class="col form-group">
                           <input type="text" class="form-control" id="pNo"  name="pNo" placeholder="Plot/Flat Number" />
                        </div>
                        <div class="col form-group">
                           <input type="text" class="form-control" id="buildingName"  name="buildingName" placeholder="Building Name" />
                        </div>
                        <div class="col form-group">
                           <input type="text" class="form-control" id="area1"  name="area1" placeholder="Area 1" />
                        </div>
                        <div class="col form-group">
                           <input type="text" class="form-control" id="area2"  name="area2" placeholder="Area 2" />
                        </div>
                        <div class="col form-group">
                           <input type="text" class="form-control" id="city"  name="city" minlength="3" placeholder="City" />
                        </div>
                        <div class="col form-group">
                           <input type="text" class="form-control" id="district"  name="district" minlength="3" placeholder="District" />
                        </div>
                     </div>
                     <div class="row">
                        <div class="col form-group">
                           <label for="mobileNumber">Mobile Number</label>
                           <input type="number" class="form-control" id="phoneNumber" placeholder="" name="mobileNumber" minlength="10" maxlength="12" />
                        </div>
                        <div class="col form-group">
                           <label for="occupation">Occupation</label>
                           <select name="occupation" id="occupation" class="form-select" >
                              <option value="">Select Occupation</option>
                              <option value="Student">Student</option>
                              <option value="Self-Employed">Self-Employed</option>
                              <option value="Govt Employee">Govt. Employee</option>
                              <option value="Private Service">Private Service</option>
                              <option value="Business Man">Business Man</option>
                           </select>
                        </div>
                     </div>
                     <div class="row">
                        <div class="col form-group">
                           <label for="Remark">Remark 1</label>
                           <input type="text" class="form-control" id="remark1"  name="remark1" placeholder="Remark 1" />
                        </div>
                        <div class="col form-group">
                           <label for="Remark">Remark 2</label>
                           <input type="text" class="form-control" id="remark2"  name="remark2" placeholder="Remark 2" />
                        </div>
                        <div class="col form-group">
                           <label for="Remark">Remark 3</label>
                           <input type="text" class="form-control" id="remark3"  name="remark3" placeholder="Remark 3" />
                        </div>
                        <div class="col form-group">
                           <label for="other">Others</label>
                           <input type="text" class="form-control" id="other" name="other" placeholder=""/>
                        </div>
                     </div>
                     <div class="form-group">  
                        <button type="submit" class="btn btn-primary" id="submit">Submit</button>
                     </div>
                     <input type="submit" name="submit" style="display:none" id="clicker" />
                  </form>
                  <div id="preview_data" title="Preview Form Data" style="display:none;"></div>
               </div>
            </div>
         </div>
      </div>
   </body>
   <script type= "text/javascript">
      $(document).ready( function() {
      	$('#submit').on('click', function(e) {
      		e.preventDefault();
      		preview();
      	});
      });
      
      async function preview(){  
             $("#error_text").html(''); 
             $('#form').validate();
             var form = $("#form");         
             var x = form.serializeArray();
             var data = "";
             var invalid = false;
             $.each(x, function(i, field) {
                 if (field.name == "vidhanSabha" && field.value == "" ){
                     invalid = true;
                     return;
                 }
                 data += field.name + " : " + field.value + "<br>";
             });
             if (invalid){
                 $("#error_text").append("Vidhan Sabha Name is Required ");
                 await new Promise(r => setTimeout(r, 1500));
                 return ;
             }
      	$('#preview_data').html('');
      	$('#preview_data').append(data);
      	$('#preview_data').dialog({
      		resizable: false,
      		modal: true,
      		buttons: {
      			'Submit': function() {
                         var url = form.attr('action');
                         $.ajax({
                             type: "POST",
                             url: url,
                             data: form.serialize(),
                             success: function(data) {
                                 alert("Form Submited Successfully");
                             },
                             error: function(data) {
                                 alert("Unable to Submit Form");
                             }
                         });
      				$(this).dialog("close");
      			},
      			'Edit': function() {
      				$(this).dialog("close");
      			}
      		}
      	});
      }
   </script>
</html>
